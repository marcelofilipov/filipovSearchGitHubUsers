<div class="container">
  <!-- Carregando -->
  <div *ngIf="loading" class="loading" role="status" aria-live="polite">
    ğŸ”„ Carregando dados...
  </div>

  <!-- Erro -->
  <div *ngIf="error" class="error" role="alert" aria-live="assertive">
    {{ error }}
  </div>

  <!-- BotÃ£o de voltar -->
  <div *ngIf="!loading && user && !error" class="back-button-wrapper">
    <a routerLink="/" class="btn-back"> â¬… Voltar para a busca </a>
  </div>

  <!-- Perfil do usuÃ¡rio -->
  <div
    class="user-profile"
    *ngIf="user && !error"
    aria-labelledby="userProfileTitle"
  >
    <img
      [src]="user.avatar_url"
      [attr.alt]="'Avatar de ' + (user.name || user.login)"
      class="avatar"
    />

    <div class="user-info">
      <h2 id="userProfileTitle">{{ user.name || user.login }}</h2>
      <p class="username">@{{ user.login }}</p>

      <div class="user-stats">
        <span
          >ğŸ‘¥ <strong>{{ user.followers }}</strong> seguidores</span
        >
        <span
          >ğŸ” <strong>{{ user.following }}</strong> seguindo</span
        >
        <span
          >ğŸ“¦ <strong>{{ user.public_repos }}</strong> repositÃ³rios</span
        >
      </div>

      <p *ngIf="user.location">ğŸ“ {{ user.location }}</p>
      <p *ngIf="user.bio" class="bio">ğŸ“ {{ user.bio }}</p>
    </div>
  </div>

  <!-- OrdenaÃ§Ã£o -->
  <div
    class="sort-controls"
    *ngIf="!loading && repos.length"
    role="region"
    aria-label="OpÃ§Ãµes de ordenaÃ§Ã£o dos repositÃ³rios"
  >
    <label for="sortField">Ordenar por:</label>
    <select
      id="sortField"
      [(ngModel)]="sortField"
      (change)="sortRepos()"
      aria-label="Campo de ordenaÃ§Ã£o"
    >
      <option value="stars">Estrelas</option>
      <option value="name">Nome</option>
    </select>

    <select
      id="sortDirection"
      [(ngModel)]="sortDirection"
      (change)="sortRepos()"
      aria-label="DireÃ§Ã£o de ordenaÃ§Ã£o"
    >
      <option value="asc">Crescente</option>
      <option value="desc">Decrescente</option>
    </select>
  </div>

  <!-- RepositÃ³rios -->
  <div
    *ngIf="!loading && repos.length > 0"
    class="repos"
    role="region"
    aria-labelledby="reposTitle"
  >
    <h3 id="reposTitle">RepositÃ³rios</h3>
    <ul>
      <li *ngFor="let repo of repos" data-cy="repo-item">
        <a
          [routerLink]="['/repo', username, repo.name]"
          [attr.aria-label]="'Detalhes do repositÃ³rio ' + repo.name"
        >
          {{ repo.name }}
        </a>
        <span aria-hidden="true">â­ {{ repo.stargazers_count }}</span>
        <p *ngIf="repo.description">{{ repo.description }}</p>
      </li>
    </ul>
  </div>

  <!-- Sem repositÃ³rios -->
  <div
    *ngIf="!loading && repos.length === 0 && user"
    class="no-repos"
    role="note"
    aria-live="polite"
  >
    Este usuÃ¡rio nÃ£o possui repositÃ³rios pÃºblicos.
  </div>
</div>
